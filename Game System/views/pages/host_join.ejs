<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body class="container">
    <header>
      <%- include('../partials/header'); %>
    </header>    
<style>
    body {
      background-color: #0C1562; 
      color: #ffffff;
      font-family: 'Arial', sans-serif;
    }
    
    .header, .footer {
      background-color: #0C1562; 
      padding: 10px 0;
      text-align: center;
    }
    
    .main {
      text-align: center;
    }

    .btn-primary {
      background-color: #e96f1d; 
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-weight: bold;
    }
    
    .btn-primary:hover {
      background-color: #e96f1d;
    }
    
    .container {
      padding: 20px;
    }
    
    .form {
      text-align: center;
      margin-top: 250px;
    }

    .form2 {
      text-align: center;
      margin-top: 180px;
    }

    h3 {
    text-align: center;
    color: #e96f1d; 
    margin-top: 20px;
    font-weight: bold;
    }
    
    h4 {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 32vh;
    text-align: center;
    color: #e96f1d; 
    margin-top: 20px;
    }

    .circle-container {
    position: relative;
    width: 300px; 
    height: 300px; 
    margin: auto;
    margin-top: 40px; 
  }

  .player-name {
    text-align: center;
    color: #e96f1d;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .player-avatar {
    width: 50px; 
    height: 50px; 
    border-radius: 50%; 
  }
  </style>

    <main>
      <div class="container">
        <h1><%= (game) ? game : 'xxxxx' %></h1>
      </div>
      <div class="circle-container">
        <h4> <strong>Room Code:</strong> <%= (room_code) ? room_code : 'xxxxx' %></h4>
        <% if (players) { %>
          <% players.forEach(function(player, index) { %>
            <div class="player-name" data-index="<%= index %>" data-total="<%= players.length %>">
              <%= player.name %>
              <img src="<%= player.avatar_id %>.png" class="player-avatar" alt="">
            </div>
          <% }); %>
        <% } %>
        <form action="/" class="form2" method="post">
          <button name="START_GAME" value="<%= (path) ? path : 'xxxxx' %>" class="btn btn-primary float-right">Start Game</button>
          </form>
      </div>
      <div class="container" hidden>
        <form action="" class="form" method="post">
          <button name="CHOSEN_GAME" id="form_button" value="jeopardy" class="btn btn-primary">Start Game</button>
        </form>
      </div>
      <div class="container">
        <form action="" class="form" method="post">
          <button name="END_GAME" id="end_button" value="" class="btn btn-primary">Exit</button>
        </form>
      </div>
    </main>

    <footer>
      <%- include('../partials/footer'); %>
    </footer>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  const players = document.querySelectorAll('.player-name');
  const distanceFromCenter = 200; //Adjust the distance from the center as needed

  players.forEach(function(player, index) {
    const total = players.length;
    const angle = (index / total) * 360; //Angle for each player
    const radians = (angle * Math.PI) / 180;
    const x = Math.cos(radians) * distanceFromCenter;
    const y = Math.sin(radians) * distanceFromCenter;

    //Adjust the position of the player name
    player.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
    //Ensure the transform origin is the center of the container
    player.style.transformOrigin = 'center center';
    //Absolutely position the player names
    player.style.position = 'absolute';
    //Center the player names within the circle container
    player.style.left = '50%';
    player.style.top = '50%';
  });
});

    function pressButton() {
      document.getElementById("form_button").click();
    }

    const myTimeout = setTimeout(pressButton, 3000);
  </script>
</html>